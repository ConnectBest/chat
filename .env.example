# =============================================================================
# ConnectBest Chat - Environment Configuration
# =============================================================================
# Copy this file to .env.local for local development
# For production, set these as GitHub Secrets and environment variables
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: The canonical URL of your site (no trailing slash)
# Development: http://localhost:8080 (matches Next.js production port)
# Production: https://your-lightsail-domain.com
NEXTAUTH_URL=http://localhost:8080

# REQUIRED: Secret key for encrypting tokens and email verification hashes
# Generate with: openssl rand -base64 32
# ⚠️  MUST be different in production!
NEXTAUTH_SECRET=your-super-secret-key-change-this-in-production

# -----------------------------------------------------------------------------
# Backend API Configuration (Flask backend)
# -----------------------------------------------------------------------------
# Development: http://localhost:5001/api
# Production: https://your-backend-domain.com/api (or same domain if monorepo)
NEXT_PUBLIC_API_URL=http://localhost:5001/api
NEXT_PUBLIC_WS_URL=http://localhost:5001

# -----------------------------------------------------------------------------
# Google OAuth Credentials
# -----------------------------------------------------------------------------
# Get these from: https://console.cloud.google.com/apis/credentials
# Required for Google Sign-In functionality
# OPTIONAL: Leave empty to disable Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# -----------------------------------------------------------------------------
# Email Configuration (for verification emails and notifications)
# -----------------------------------------------------------------------------
# For Gmail: Use App Passwords - https://support.google.com/accounts/answer/185833
# For other providers: Use their SMTP settings

# SMTP Server (default: Gmail)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587

# Your email account credentials
# For Gmail: Use an App Password, NOT your regular password
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password

# "From" address for outgoing emails
EMAIL_FROM=noreply@connectbest.com

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# REQUIRED in production: MongoDB connection string
# Get from MongoDB Atlas: https://cloud.mongodb.com/
# Format: mongodb+srv://<username>:<password>@<cluster>.mongodb.net/<database>?retryWrites=true&w=majority
# Development: Uses in-memory mock data if not provided
MONGODB_URI=mongodb://localhost:27017/connectbest-chat

# Optional: Redis connection string for caching and real-time features
# Format: redis://username:password@host:port
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment mode
# development: Logs verification codes to console, uses mock data
# production: Sends actual emails, requires database
NODE_ENV=development

# Server binding (usually 0.0.0.0 for containerized deployments)
HOST=0.0.0.0
PORT=8080

# WebSocket API URL (AWS API Gateway WebSocket)
# After deploying websocket-api stack, add the URL here
# Format: wss://your-api-id.execute-api.region.amazonaws.com/prod
# OPTIONAL: Leave empty to disable real-time WebSocket features
NEXT_PUBLIC_WEBSOCKET_URL=

# -----------------------------------------------------------------------------
# AWS Configuration (for file uploads - optional)
# -----------------------------------------------------------------------------
# AWS_REGION=us-west-2
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=connectbest-chat-uploads

# -----------------------------------------------------------------------------
# AI/ML Integration (optional - for future features)
# -----------------------------------------------------------------------------
# OpenAI API key for AI assistant features
# OPENAI_API_KEY=sk-...

# -----------------------------------------------------------------------------
# Monitoring & Logging (optional)
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking
# SENTRY_DSN=https://...

# Log level (error, warn, info, debug)
# LOG_LEVEL=info

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
#
# 1. GitHub Secrets Required:
#    - MONGODB_URI (REQUIRED)
#    - NEXTAUTH_SECRET (REQUIRED)
#    - NEXTAUTH_URL (REQUIRED - your Lightsail URL)
#    - GOOGLE_CLIENT_ID (optional)
#    - GOOGLE_CLIENT_SECRET (optional)
#    - EMAIL_HOST, EMAIL_PORT, EMAIL_USER, EMAIL_PASSWORD, EMAIL_FROM (optional)
#    - AWS_ROLE_ARN (for CI/CD - already configured)
#    - AWS_REGION, AWS_ACCOUNT_ID, ECR_PUBLIC_ALIAS, ECR_PUBLIC_REPO (already configured)
#
# 2. MongoDB Atlas Setup:
#    - Create a free M0 cluster at https://cloud.mongodb.com/
#    - Whitelist IP: 0.0.0.0/0 (for Lightsail) or specific Lightsail IP
#    - Create database user with read/write permissions
#    - Get connection string and add to GitHub Secrets as MONGODB_URI
#
# 3. Google OAuth Setup (if using):
#    - Go to https://console.cloud.google.com/apis/credentials
#    - Create OAuth 2.0 Client ID
#    - Add authorized redirect URI: https://your-domain.com/api/auth/callback/google
#    - Add client ID and secret to GitHub Secrets
#
# 4. Email Setup (if using):
#    - For Gmail: Enable 2FA and create App Password
#    - Add EMAIL_* variables to GitHub Secrets
#
# 5. Lightsail Deployment:
#    - Service name: chat-app (configured in workflow)
#    - Region: us-west-2 (configured in workflow)
#    - Container power: Nano/Micro (upgrade as needed)
#    - Public domain: Will be assigned by Lightsail
#
# 6. Health Check:
#    - Endpoint: /api/health
#    - Must return 200 OK for service to be considered healthy
#
# =============================================================================
