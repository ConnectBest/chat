# =============================================================================
# ConnectBest Chat Backend - Flask API Configuration
# =============================================================================
# Copy this file to .env in the backend/ directory
# For production, set these as environment variables
# =============================================================================

# -----------------------------------------------------------------------------
# Flask Configuration
# -----------------------------------------------------------------------------
# Environment: development, production, testing
FLASK_ENV=development

# Set to False in production
DEBUG=True

# REQUIRED: Secret key for Flask sessions
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-secret-key-change-in-production

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# REQUIRED: Secret key for JWT token signing
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=jwt-secret-key-change-in-production

# Token expiration in hours (default: 168 = 7 days)
JWT_EXPIRATION_HOURS=168

# -----------------------------------------------------------------------------
# MongoDB Configuration
# -----------------------------------------------------------------------------
# REQUIRED: MongoDB connection string
# Development: mongodb://localhost:27017/chatapp
# Production: mongodb+srv://<user>:<pass>@<cluster>.mongodb.net/chatapp?retryWrites=true&w=majority
MONGODB_URI=mongodb://localhost:27017/chatapp

# Database name (extracted from URI if not specified)
MONGODB_DB_NAME=chatapp

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins for CORS
# Development: Include both dev server (3000) and production port (8080)
# Production: Only your frontend domain(s)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Host to bind to (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
HOST=0.0.0.0

# Port for Flask server
PORT=5001

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
# Maximum upload size in bytes (default: 52428800 = 50MB)
MAX_CONTENT_LENGTH=52428800

# Upload folder path (relative to backend/)
UPLOAD_FOLDER=static/uploads

# -----------------------------------------------------------------------------
# Google OAuth Configuration
# -----------------------------------------------------------------------------
# Get these from: https://console.cloud.google.com/apis/credentials
# OPTIONAL: Leave empty to disable Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# OAuth redirect URI (must match Google Console configuration)
# Development: http://localhost:5001/api/auth/google/callback
# Production: https://your-domain.com/api/auth/google/callback
GOOGLE_REDIRECT_URI=http://localhost:5001/api/auth/google/callback

# -----------------------------------------------------------------------------
# Frontend URL (for OAuth redirects and CORS)
# -----------------------------------------------------------------------------
# Development: http://localhost:8080
# Production: https://your-frontend-domain.com
FRONTEND_URL=http://localhost:8080

# Backend URL (for self-referential links)
BACKEND_URL=http://localhost:5001

# -----------------------------------------------------------------------------
# Email Configuration (for verification and notifications)
# -----------------------------------------------------------------------------
# SMTP server settings
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True

# Email credentials
# For Gmail: Use App Password (https://support.google.com/accounts/answer/185833)
MAIL_USERNAME=
MAIL_PASSWORD=

# -----------------------------------------------------------------------------
# Redis Configuration (Optional - for caching)
# -----------------------------------------------------------------------------
# REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Rate Limiting (requests per minute)
# -----------------------------------------------------------------------------
# RATE_LIMIT=100

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
#
# 1. Required Environment Variables:
#    - MONGODB_URI (REQUIRED - use MongoDB Atlas)
#    - JWT_SECRET_KEY (REQUIRED - generate strong random key)
#    - SECRET_KEY (REQUIRED - generate strong random key)
#    - CORS_ORIGINS (REQUIRED - set to your frontend domain)
#    - FLASK_ENV=production
#    - DEBUG=False
#
# 2. MongoDB Atlas Setup:
#    - Create M0 free cluster at https://cloud.mongodb.com/
#    - Whitelist IP: 0.0.0.0/0 or specific server IPs
#    - Create database user with readWrite role
#    - Get connection string format:
#      mongodb+srv://<user>:<pass>@<cluster>.mongodb.net/<dbname>?retryWrites=true&w=majority
#
# 3. Security Best Practices:
#    - Never commit .env files to git
#    - Use different secrets for dev/prod
#    - Rotate secrets regularly
#    - Use environment-specific configurations
#    - Enable HTTPS in production
#
# 4. Running in Production:
#    gunicorn -k geventwebsocket.gunicorn.workers.GeventWebSocketWorker -w 1 app:app
#
# =============================================================================
